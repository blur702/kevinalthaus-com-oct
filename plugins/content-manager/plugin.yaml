name: content-manager
version: 1.0.0
displayName: Content Manager
description: Full-featured content management system with rich text editing, media uploads, version history, scheduled publishing, and hierarchical taxonomies
author:
  name: Kevin Althaus
  email: contact@kevinalthaus.com
license: MIT
keywords:
  - content
  - cms
  - pages
  - editor
  - media
  - publishing

capabilities:
  - database:read
  - database:write
  - api:call

entrypoint: dist/index.js

backend:
  routes:
    # Content management endpoints
    - path: /api/content
      method: GET
      handler: listContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: List all content with filtering and pagination

    - path: /api/content/:id
      method: GET
      handler: getContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: Get single content item with details

    - path: /api/content
      method: POST
      handler: createContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Create new content (Editor role required)

    - path: /api/content/:id
      method: PUT
      handler: updateContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Update content with automatic versioning

    - path: /api/content/:id
      method: DELETE
      handler: deleteContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Delete content (Admin only)

    - path: /api/content/:id/publish
      method: POST
      handler: publishContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Publish content (Admin only)

    - path: /api/content/:id/unpublish
      method: POST
      handler: unpublishContentHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Revert content to draft status (Admin only)

    # Version history endpoints
    - path: /api/content/:id/versions
      method: GET
      handler: getVersionsHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: Get version history for content

    - path: /api/content/:id/restore/:version
      method: POST
      handler: restoreVersionHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Restore previous version (Admin only)

    # Media management endpoints
    - path: /api/content/media/upload
      method: POST
      handler: uploadMediaHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Upload media files with validation

    - path: /api/content/media
      method: GET
      handler: listMediaHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: List uploaded media files

    - path: /api/content/media/:id
      method: DELETE
      handler: deleteMediaHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Delete media file (Admin only)

    # Categories endpoints
    - path: /api/content/categories
      method: GET
      handler: listCategoriesHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: List all categories in hierarchy

    - path: /api/content/categories
      method: POST
      handler: createCategoryHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Create new category (Admin only)

    - path: /api/content/categories/:id
      method: PUT
      handler: updateCategoryHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Update category (Admin only)

    - path: /api/content/categories/:id
      method: DELETE
      handler: deleteCategoryHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Delete category if unused (Admin only)

    # Tags endpoints
    - path: /api/content/tags
      method: GET
      handler: listTagsHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: List all tags

    - path: /api/content/tags
      method: POST
      handler: createTagHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Create new tag (Editor role required)

    - path: /api/content/tags/:id
      method: DELETE
      handler: deleteTagHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Delete tag (Admin only)

    # File type configuration endpoints
    - path: /api/content/file-types
      method: GET
      handler: listFileTypesHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:read
      description: List allowed file types

    - path: /api/content/file-types
      method: POST
      handler: addFileTypeHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Add new allowed file type (Admin only)

    - path: /api/content/file-types/:id
      method: PUT
      handler: updateFileTypeHandler
      middleware:
        - authentication
      requiredCapabilities:
        - database:write
      description: Enable/disable file type (Admin only)

database:
  migrations:
    - 01-create-schema.sql
    - 02-create-content-table.sql
    - 04-create-media-table.sql
    - 05-create-file-types-table.sql

hooks:
  install: onInstall
  activate: onActivate
  deactivate: onDeactivate
  uninstall: onUninstall
  update: onUpdate

dependencies:
  - taxonomy
